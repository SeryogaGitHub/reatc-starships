(this["webpackJsonpreatc-starships"]=this["webpackJsonpreatc-starships"]||[]).push([[0],{36:function(e,t,a){e.exports=a(65)},41:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),i=(a(41),a(4)),o=a(5),l=a(13),u=a(14),h=a(15),p=a(16),g=a(8),m=a(6),f=a(17),E=a.n(f),S={ships:[],pageSize:10,totalCount:0,currentPage:1,searchText:null,isFetching:!1,profile:null},b=function(e){return{type:"SEARCH_SHIPS",ships:e}},d=function(e){return{type:"SET_CURRENT_PAGE",page:e}},v=function(e){return{type:"SET_TOTAL_COUNT",count:e}},P=function(e){return{type:"SET_IS_FETCHING",fetching:e}},T=function(e){return{type:"SET_SEARCH_TEXT",search:e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHIPS":return Object(m.a)({},e,{ships:t.ships});case"SET_CURRENT_PAGE":return Object(m.a)({},e,{currentPage:t.page});case"SET_TOTAL_COUNT":return Object(m.a)({},e,{totalCount:t.count});case"SET_PROFILE":return Object(m.a)({},e,{profile:t.profile});case"SEARCH_SHIPS":return Object(m.a)({},e,{ships:t.ships});case"SET_IS_FETCHING":return Object(m.a)({},e,{isFetching:t.fetching});case"SET_SEARCH_TEXT":return Object(m.a)({},e,{searchText:t.search});default:return e}},O=a(35),j=function(e){for(var t=e.pageSize,a=e.totalCount,c=e.currentPage,s=e.onChangePages,i=e.portionSize,o=void 0===i?3:i,l=Math.ceil(a/t),u=[],h=1;h<=l;h++)u.push(h);var p=Math.ceil(l/o),g=Object(n.useState)(1),m=Object(O.a)(g,2),f=m[0],E=m[1],S=(f-1)*o+1,b=f*o;return r.a.createElement("ul",{className:"pagination"},f>1&&r.a.createElement("button",{className:"arrow",onClick:function(){E(f-1)}},"\u2190"),u.filter((function(e){return e>=S&&e<=b})).map((function(e,t){return r.a.createElement("li",{key:t,className:c===e?"active":"",onClick:function(){s(e)}},e)})),p>f&&r.a.createElement("button",{className:"arrow",onClick:function(){E(f+1)}},"\u2192"))},y=function(){return r.a.createElement("div",{className:"placeholder"},r.a.createElement("div",{className:"loader"}," "))},_=function(e){var t=e.ships,a=e.currentPage,n=e.searchText,c=e.totalCount,s=e.pageSize,o=e.onSearch,l=e.onChangePages,u=e.isFetching,h=t.map((function(e,t){return r.a.createElement(i.b,{key:t,to:"/starship/"+(a=e.url,Number(a.replace(/\D+/g,""))),className:"ship"},r.a.createElement("h2",null,e.name),r.a.createElement("ul",null,r.a.createElement("li",null,"Model: ",e.model),r.a.createElement("li",null,"Length: ",e.length),r.a.createElement("li",null,"Consumables: ",e.consumables)));var a}));return r.a.createElement("div",{className:"ships-page"},r.a.createElement("input",{type:"search",value:n||"",className:"search",placeholder:"Search",onChange:function(e){return o(e.target.value)},autoFocus:!0}),r.a.createElement(j,{currentPage:a,totalCount:c,pageSize:s,onChangePages:l}),r.a.createElement("div",{className:"ships-list"},u?r.a.createElement(y,null):null,h))},N=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onChangePages=function(t){var a=e.props,n=a.getShips,r=a.searchText,c=a.getShipsSearch;r&&t?(c(r,t),e.props.history.push("/search=".concat(r,"&page=").concat(t))):n(t)},e.onSearch=function(t){var a=e.props,n=a.getShipsSearch,r=a.currentPage,c=a.getShips,s=a.setSearchText;t.length?(n(t,1),e.props.history.push("/search=".concat(t,"&page=",1))):(e.props.history.push("/"),c(r),s(null))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getShips,a=e.currentPage,n=e.getShipsSearch,r=this.props.match.params,c=r.search,s=r.page;c&&s?n(c,Number(s)):t(a)}},{key:"render",value:function(){var e=this.props,t=e.ships,a=e.isFetching,n=e.setCurrentPage,c=e.totalCount,s=e.pageSize,i=e.currentPage,o=e.searchText;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{ships:t,setCurrentPage:n,totalCount:c,pageSize:s,currentPage:i,onChangePages:this.onChangePages,onSearch:this.onSearch,isFetching:a,searchText:o}))}}]),a}(r.a.Component),F=Object(o.e)(N),w=Object(g.b)((function(e){return{ships:e.shipsPage.ships,pageSize:e.shipsPage.pageSize,currentPage:e.shipsPage.currentPage,totalCount:e.shipsPage.totalCount,searchText:e.shipsPage.searchText,isFetching:e.shipsPage.isFetching}}),{searchShips:b,getShips:function(e){return function(t){t(P(!0)),t(d(e)),E.a.get("https://swapi.co/api/starships/?page=".concat(e)).then((function(e){t({type:"SET_SHIPS",ships:e.data.results}),t(v(e.data.count)),t(P(!1))}))}},getShipsSearch:function(e,t){return function(a){a(P(!0)),a(T(e)),a(d(t)),E.a.get("https://swapi.co/api/starships/?search=".concat(e,"&page=").concat(t)).then((function(e){a(b(e.data.results)),a(v(e.data.count)),a(P(!1))}))}},setSearchText:T})(F),k=(a(64),function(e){var t=e.profile,a=e.isFetching;return e.profile?r.a.createElement("div",{className:"ship-page"},a?r.a.createElement(y,null):null,r.a.createElement("h2",null,t.name),r.a.createElement("ul",null,r.a.createElement("li",null,"Model: ",t.model),r.a.createElement("li",null,"Length: ",t.length),r.a.createElement("li",null,"Consumables: ",t.consumables))):r.a.createElement(y,null)}),x=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getProfile)(this.props.match.params.userId)}},{key:"render",value:function(){var e=this.props,t=e.profile,a=e.isFetching;return r.a.createElement(k,{profile:t,isFetching:a})}}]),a}(r.a.Component),I=Object(o.e)(x),H=Object(g.b)((function(e){return{profile:e.shipsPage.profile,isFetching:e.shipsPage.isFetching}}),{getProfile:function(e){return function(t){t(P(!0)),t(T("")),E.a.get("https://swapi.co/api/starships/"+e).then((function(e){t({type:"SET_PROFILE",profile:e.data}),t(P(!1))}))}}})(I);var R=function(){return r.a.createElement("div",{className:"center"},r.a.createElement(i.b,{to:"/",className:"link"},"Main page"),r.a.createElement(o.a,{exact:!0,path:"/",render:function(){return r.a.createElement(w,null)}}),r.a.createElement(o.a,{exact:!0,path:"/search=:search&page=:page",render:function(){return r.a.createElement(w,null)}}),r.a.createElement(o.a,{exact:!0,path:"/starship/:userId?",render:function(){return r.a.createElement(H,null)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(9),A=a(34),M=Object(z.c)({shipsPage:C}),L=Object(z.d)(M,Object(z.a)(A.a)),G=function(){s.a.render(r.a.createElement(i.a,null,r.a.createElement(g.a,{store:L},r.a.createElement(R,null))),document.getElementById("root"))};G(),L.subscribe((function(){G()})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.6220c5c4.chunk.js.map
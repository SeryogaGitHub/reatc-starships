(this["webpackJsonpreatc-starships"]=this["webpackJsonpreatc-starships"]||[]).push([[0],{38:function(e,t,n){e.exports=n(67)},43:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(15),c=n.n(s),i=(n(43),n(7)),o=n(8),l=n(17),u=n(18),p=n(19),h=n(20),g=n(12),m=n(10),f={ships:[],pageSize:10,totalCount:0,currentPage:1,searchCurrentPage:1,searchTest:null,isFetching:!1,profile:null},E=function(e){return{type:"SET_SHIPS",ships:e}},S=function(e){return{type:"SET_IS_FETCHING",fetching:e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHIPS":return Object(m.a)({},e,{ships:t.ships});case"SET_CURRENT_PAGE":return Object(m.a)({},e,{currentPage:t.page});case"SET_TOTAL_COUNT":return Object(m.a)({},e,{totalCount:t.count});case"SET_PROFILE":return Object(m.a)({},e,{profile:t.profile});case"SEARCH_SHIPS":return Object(m.a)({},e,{ships:t.ships});case"SET_IS_FETCHING":return Object(m.a)({},e,{isFetching:t.fetching});default:return e}},C=n(37),P=function(e){for(var t=e.pageSize,n=e.totalCount,s=e.currentPage,c=e.onChangePages,i=e.portionSize,o=void 0===i?3:i,l=Math.ceil(n/t),u=[],p=1;p<=l;p++)u.push(p);var h=Math.ceil(l/o),g=Object(a.useState)(1),m=Object(C.a)(g,2),f=m[0],E=m[1],S=(f-1)*o+1,d=f*o;return r.a.createElement("ul",{className:"pagination"},f>1&&r.a.createElement("button",{className:"arrow",onClick:function(){E(f-1)}},"\u2190"),u.filter((function(e){return e>=S&&e<=d})).map((function(e,t){return r.a.createElement("li",{key:t,className:s===e?"active":"",onClick:function(){c(e)}},e)})),h>f&&r.a.createElement("button",{className:"arrow",onClick:function(){E(f+1)}},"\u2192"))},b=function(){return r.a.createElement("div",{className:"placeholder"},r.a.createElement("div",{className:"loader"}," "))},v=function(e){var t=e.ships,n=e.currentPage,a=e.totalCount,s=e.pageSize,c=e.onSearch,o=e.onChangePages,l=e.isFetching,u=t.map((function(e,t){return r.a.createElement(i.b,{key:t,to:"/starships/"+(n=e.url,Number(n.replace(/\D+/g,""))),className:"ship"},r.a.createElement("h2",null,e.name),r.a.createElement("ul",null,r.a.createElement("li",null,"Model: ",e.model),r.a.createElement("li",null,"Length: ",e.length),r.a.createElement("li",null,"Consumables: ",e.consumables)));var n}));return r.a.createElement("div",{className:"ships-page"},r.a.createElement("input",{type:"search",className:"search",placeholder:"Search",onChange:function(e){return c(e.target.value)}}),r.a.createElement(P,{currentPage:n,totalCount:a,pageSize:s,onChangePages:o}),r.a.createElement("div",{className:"ships-list"},l?r.a.createElement(b,null):null,u))},O=n(9),T=n.n(O),F=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onChangePages=function(t){var n=e.props,a=n.setShips,r=n.setCurrentPage,s=n.setIsFetching;r(t),s(!0),T.a.get("https://swapi.co/api/starships/?page=".concat(t)).then((function(e){a(e.data.results),s(!1)}))},e.onSearch=function(t){var n=e.props,a=n.searchShips,r=n.setIsFetching,s=n.setTotalCount,c=n.currentPage;t.length?(r(!0),T.a.get("https://swapi.co/api/starships/?search=".concat(t)).then((function(n){a(n.data.results),s(n.data.count),e.props.history.push("?search=".concat(t,"&page=").concat(c)),r(!1)}))):(e.props.history.push("/"),r(!0),T.a.get("https://swapi.co/api/starships/").then((function(e){E(e.data.results),s(e.data.count),r(!1)})))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setShips,n=e.setTotalCount,a=e.setIsFetching;a(!0),T.a.get("https://swapi.co/api/starships/").then((function(e){t(e.data.results),n(e.data.count),a(!1)}))}},{key:"render",value:function(){var e=this.props,t=e.ships,n=e.isFetching,a=e.setCurrentPage,s=e.totalCount,c=e.pageSize,i=e.currentPage;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{ships:t,setCurrentPage:a,totalCount:s,pageSize:c,currentPage:i,onChangePages:this.onChangePages,onSearch:this.onSearch,isFetching:n}))}}]),n}(r.a.Component),j=Object(o.e)(F),y=Object(g.b)((function(e){return{ships:e.shipsPage.ships,pageSize:e.shipsPage.pageSize,currentPage:e.shipsPage.currentPage,totalCount:e.shipsPage.totalCount,isFetching:e.shipsPage.isFetching}}),{setShips:E,setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",page:e}},setTotalCount:function(e){return{type:"SET_TOTAL_COUNT",count:e}},searchShips:function(e){return{type:"SEARCH_SHIPS",ships:e}},setIsFetching:S})(j),N=(n(66),function(e){var t=e.profile,n=e.isFetching;return e.profile?r.a.createElement("div",{className:"ship-page"},n?r.a.createElement(b,null):null,r.a.createElement("h2",null,t.name),r.a.createElement("ul",null,r.a.createElement("li",null,"Model: ",t.model),r.a.createElement("li",null,"Length: ",t.length),r.a.createElement("li",null,"Consumables: ",t.consumables))):r.a.createElement(b,null)}),I=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setProfile,n=e.setIsFetching,a=this.props.match.params.userId;n(!0),T.a.get("https://swapi.co/api/starships/"+a).then((function(e){t(e.data),n(!1)}))}},{key:"render",value:function(){var e=this.props,t=e.profile,n=e.isFetching;return r.a.createElement(N,{profile:t,isFetching:n})}}]),n}(r.a.Component),_=Object(o.e)(I),w=Object(g.b)((function(e){return{profile:e.shipsPage.profile,isFetching:e.shipsPage.isFetching}}),{setProfile:function(e){return{type:"SET_PROFILE",profile:e}},setIsFetching:S})(_);var k=function(){return r.a.createElement("div",{className:"center"},r.a.createElement(i.b,{to:"/",className:"link"},"Main page"),r.a.createElement(o.a,{exact:!0,path:"/",render:function(){return r.a.createElement(y,null)}}),r.a.createElement(o.a,{path:"/starships/:userId?",render:function(){return r.a.createElement(w,null)}}),r.a.createElement(o.a,{path:"/:text?&:page?",render:function(){return r.a.createElement(w,null)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(14),H=Object(z.b)({shipsPage:d}),R=Object(z.c)(H),A=function(){c.a.render(r.a.createElement(i.a,null,r.a.createElement(g.a,{store:R},r.a.createElement(k,null))),document.getElementById("root"))};A(),R.subscribe((function(){A()})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.f87a4c92.chunk.js.map